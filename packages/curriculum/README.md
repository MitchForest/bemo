# @repo/curriculum

Curriculum primitives, seed data, and lookup utilities for Bemo's PreK–Grade 2 reading & math scope.

## Contents

- Seeded subjects, courses, lessons, and the canonical skill list (skills are the atomic nodes in the knowledge graph).
- Auto-generated skill task templates (learn, guided, independent, review, quick check, fluency) with baseline scripts, XP awards, and modalities.
- Lookup helpers for skills, lessons, and subjects that power authoring tools and runtime fallbacks.

## Data layout

Static curriculum blueprints now live under `packages/curriculum/src/data` so large tables stay maintainable:

```
src/
  data/
    keys.ts           # Shared Subject/Course/Lesson unions
    types.ts          # Blueprint interfaces shared across data files
    subjects.ts       # Subject metadata (reading, math)
    courses.ts        # Course metadata keyed by CourseKey
    lessons.ts        # Lesson metadata keyed by LessonKey
    skills/
      reading/
        prek.ts
        kindergarten.ts
        grade1.ts
        grade2.ts
      math/
        prek.ts
        kindergarten.ts
        grade1.ts
        grade2.ts
      index.ts        # Aggregates subject/grade skill arrays + allSkillBlueprints
    tasks/
      index.ts        # Skill task template generators (learn/guided/etc.)
```

When adding or editing skills:

1. Update the appropriate grade file (e.g., `skills/reading/grade1.ts`). Keep objects sorted in teaching sequence and run `bunx biome format <file>` after editing.
2. The aggregator `skills/index.ts` automatically pulls new entries into `allSkillBlueprints`, so no extra wiring is required.
3. If you introduce new courses or lessons, edit `courses.ts` or `lessons.ts` respectively and run `bunx biome format` to keep style consistent.
4. To tweak the autogenerated task flows, edit `data/tasks/index.ts`—it builds the Learn/We Do/Your Turn/etc. scripts from a single place.

`src/index.ts` consumes these blueprints to generate IDs, seed records, helper lookups, and the default skill task templates, so downstream consumers get the same API with a much smaller source file.

## Core exports

```ts
import {
  seedSkills,
  seedCourses,
  seedLessons,
  seedSubjects,
  seedSkillTaskTemplates,
  getSkillsByDomain,
  getTaskTemplatesBySkill,
} from "@repo/curriculum";
```

### Seed IDs

The module defines constant ID maps (`SUBJECT_IDS`, `COURSE_IDS`, `LESSON_IDS`, `SKILL_IDS`) so product surfaces can reference stable UUIDs while content moves into storage.

### Helpers

```ts
const readingSkills = getSkillsByDomain("reading");
const reviewTemplates = getTaskTemplatesBySkill(SKILL_IDS.MATH_ADD_WITH_OBJECTS_WITHIN_5);
const learnTemplate = reviewTemplates.find((template) => template.intent === "learn");
```

Each helper returns plain arrays so they work for seeding, authoring previews, or runtime fallbacks when the database is unavailable.

## Dev seeds

Alongside the core skill graph we ship a small set of fixtures so the engine and API can run without Postgres:

- `seedAssets`, `seedMicroGames`, `seedPracticeActivities` – baseline media and practice blueprints surfaced through `/api/content/*`.
- `seedMotivationTracks`, `seedMotivationRewards`, `seedMotivationLeagues`, `seedMotivationQuests`, `seedJoyBreaks`, `seedTimeBackLedger` – demo motivation content powering the engine and `/api/motivation` endpoints.
- `seedDiagnosticProbes` – a couple of diagnostic probes so `/api/diagnostic` works out of the box.

They are intentionally small but representative: enough to exercise the motivation, diagnostics, and plan surfaces while keeping the repo quick to clone.

## Template anatomy

Every `SkillTaskTemplate` exposes:

| Field | Meaning |
| --- | --- |
| `intent` | Instructional role (`learn`, `guided_practice`, `independent_practice`, `review_prompt`, `quick_check`, `fluency`). |
| `xpAward` | XP granted on completion (drives daily/weekly goals + sticker unlocks). |
| `estimatedMinutes` | Expected seat time (1–4 minutes). |
| `modalities` | Input/output hints (voice, tap, manipulatives). |
| `steps` | Ordered steps with kind (`instruction`, `example`, `practice`, `prompt`, `reflection`), prompts, hints, and optional practice items. |

Authoring teams replace the generated prompts with scripted language, manipulatives, and practice items per skill.

## Future work

- Replace generated language with authored scripts, gestures, manipulatives, and practice items per skill.
- Add review prompts tuned to real spacing intervals and record them in template metadata.
- Connect seed data to the authoring CMS and database migrations so the canonical list lives in persistent storage.
- Add strand/standard lookup helpers for reporting filters and analytics.
